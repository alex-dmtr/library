<% include ../../partials/header %>

<script src="//cdn.tinymce.com/4/tinymce.min.js"></script>


<h2>Edit book <small><%=book.id%></small> </h2>


<form method="POST" class='editform'>
    <input type='hidden' value='<%=book.id%>' name='_id'>
    <div class="form-group col-md-6">
        <label for="name">Name</label>
        <input type='text' name='name' value='<%=book.name%>' class='form-control' required>
    </div>
    <div class="form-group col-md-6">
        <label for="author">Author</label>
        <select name='author' class='form-control'>
        <% for (var i = 0; i < authors.length; i++) { %>
            <% if (book.author.name == authors[i].name) { %> <!--temporary workaround-->
                <option selected value='<%=authors[i]._id%>'><%=authors[i].name%></option>
            <% } else { %>
                <option value='<%=authors[i]._id%>'><%=authors[i].name%></option>
            <% } %>
        <% } %>
        </select>
    </div>

    <div class='form-group col-md-6'>
        <label for="price">Price</label>
        <input type='number' name='price' value='<%=book.price%>' min='0' step='0.01' class='form-control' required>
    </div>

    <div class='form-group col-md-6'>
        <label for="release_date">Release date</label>
        <input type='date' name='release_date' value='<%=book.release_date%>' class='form-control' required>
    </div>

    <div class="form-group">
        <label for="summary">Summary</label>
        <textarea id="summary" name='summary' class='form-control' rows='10'><%= book.summary %></textarea>
    </div>
    <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" name='description' class='form-control' rows='10'><%= book.description %></textarea>
    </div>
    
    <button type='submit' class='btn btn-default'>Save</button>
</form>
<% include ../../partials/footer %>


<script> 

    $(document).ready(function() {

        tinymce.init(
            {
                selector: '#summary',
                font_formats: 'Georgia'
            })
        tinymce.init({selector: '#description'})
        
    })
</script>