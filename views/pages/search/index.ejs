<% include ../../partials/header %>

<script>
  var query = <%- JSON.stringify(query) %>
  var EJS = require('EJS')

  $.ajax({
    url: '/search/json',
    type: 'GET',
    data: query,
    success: display
  })

  function display(data) {
    if (data.authors.length > 0) {
      $("#authors").show()

      data.authors.forEach(function(author) {
        $("#authors").append(author.name)
      })  
    }
    else
      $("#authors").hide()
  

    if (data.books.length > 0) {
      $("#books").show()

      data.books.forEach(function(book) {
        $("#books").append(book.name)
      })
    }
    else
      $("#books").hide()
    
}


</script>

<div id='books' hidden>
  <h2>Books</h2>

</div>

<div id='authors' hidden>
  <h2>Authors</h2>

</div>
<% include ../../partials/footer %>


